<!DOCTYPE html>

<html lang="kr" xmlns="http://www.w3.org/1999/xhtml">

<head>
    <title>testfile</title>

</head>

<body>
    게더타운 퀴즈입니다!!<br />
    <script>
        //전역변수, 상수관리
        var randMax = 10;
        var QMax = 5;
        var point = 100 / QMax;

     

        //함수부
        function addQForm(aList) {
            
     

        }
        function getRandNum(tnum,max ) {      
            for (var i = 0; i <= max; i++) {
                flag = Math.floor(Math.random() * (randMax)); //부호결정자
                tnum[i] = Math.floor(Math.random() * (randMax))+1 //수의 절댓값 
                if (flag % 2 == 0) {
                    tnum[i] *= -1;
                }//짝수-> 음수로 결정
            }

        }

        function makeQList(qstr, tnum, max) {
            var temp1, temp2; // +부호 생성을 위한 임시 변수
            var j = 1;
             
            for (var i = 0; i < max; i += 2) {
                if (tnum[i] > 0) { temp1 = "+" + tnum[i]; } else { temp1 = tnum[i]; }//부호붙이기
                if (tnum[i + 1] > 0) { temp2 = "+" + tnum[i + 1]; } else { temp2 = tnum[i + 1]; }//부호붙이기         
                qstr[j-1] = "<문제" + (j) + "> ( " + temp1 + " ) " + "+" + " ( " + temp2 + " ) = " + "<br/>"
                j++;
            }
        }

        function makeAList(tans, tnum, max) {
            var j = 0;
            for (var i = 0; i < max; i += 2) {  
                tans[j] = tnum[i] + tnum[i + 1]//정답생성
                j++;
            }
        }
        function printQandFBox( fromList,str,max) {
            
            for (var i = 0; i < max; i ++) {
                document.write(str[i]);//문장출력
                formList[i] = document.createElement("INPUT");
                formList[i].setAttribute("type", "text");
                formList[i].setAttribute("name", "");
                formList[i].setAttribute("id", "ans" + i);//폼생성완료
                document.body.appendChild(formList[i])//폼등록
                document.write("<br/><br/>");
            }
        }
        function removeALL(formList, sbtn) {
            for (var i = 0; i < QMax; i++) {
                document.body.removeChild(formList[i]);
            }
            document.body.removeChild(sbtn);
        }

        //html추가, 작성부
        var tsum=0 //점수
        var aList = new Array();//학생답변

        var tnum = new Array();    //문제출제용 배열
        new getRandNum(tnum, randMax); //10개의 랜덤수배열
        //document.write(tnum[0]+"<br/>");
      
        var str = new Array(); //문제문장
        new makeQList(str, tnum, randMax)//문제출제

        var tans = new Array(); //답생성용 배열
        new makeAList(tans, tnum, randMax)//답생성
      

      
        var formList = new Array();//입력창 배열
        new printQandFBox(formList, str, QMax);

 
        //버튼생성
        var sbtn = document.createElement('button');
        var btnText = document.createTextNode('제출하기');
        sbtn.appendChild(btnText);
        document.body.appendChild(sbtn);
        document.write("<br/><br/>");

        //리스너등록
        sbtn.addEventListener("click", function () {
            //alert("버튼클릭이벤트발생");
            for (i = 0; i < QMax; i++) {//getitem
                aList[i] = parseInt( document.getElementById("ans" + i).value);
                document.write((i + 1) + "번 답:" + aList[i]);
                if (aList[i] == tans[i]) {
                    document.write("   정답O<br/>");
                    tsum += point;
                }
                else {
                    document.write("   오답X →  답:"+tans[i]+"<br/>");
                }
            }
            document.write("종합점수: " + tsum + "<br/>");
            new removeALL(formList, sbtn);
            tsum = 0;
        });

      

    </script>


</body>

</html>
